@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * { box-sizing: border-box; }
  
  body {
    background-color: #0F172A;
    color: #F1F5F9;
    font-family: 'DM Sans', sans-serif;
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
  }

  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: #1E293B; }
  ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: #14B8A6; }

  ::selection { background: rgba(20, 184, 166, 0.3); color: #F1F5F9; }
}

@layer components {
  .glass {
    background: rgba(30, 41, 59, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.07);
  }

  .glass-bright {
    background: rgba(37, 51, 71, 0.85);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(20, 184, 166, 0.15);
  }

  .glow-teal {
    box-shadow: 0 0 20px rgba(20, 184, 166, 0.25), 0 0 40px rgba(20, 184, 166, 0.1);
  }

  .glow-indigo {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.25), 0 0 40px rgba(99, 102, 241, 0.1);
  }

  .nav-item {
    @apply flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-400 hover:text-white hover:bg-navy-700 transition-all duration-200 cursor-pointer font-body text-sm font-medium;
  }

  .nav-item.active {
    @apply bg-teal-500/10 text-teal-400 border border-teal-500/20;
  }

  .btn-primary {
    @apply bg-teal-500 hover:bg-teal-400 text-navy-900 font-display font-semibold px-4 py-2.5 rounded-xl transition-all duration-200 flex items-center gap-2 text-sm;
  }

  .btn-secondary {
    @apply bg-navy-700 hover:bg-navy-600 text-slate-300 hover:text-white font-body font-medium px-4 py-2.5 rounded-xl transition-all duration-200 flex items-center gap-2 text-sm border border-navy-600 hover:border-slate-500;
  }

  .btn-ghost {
    @apply text-slate-400 hover:text-white hover:bg-navy-700 font-body font-medium px-3 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm;
  }

  .card {
    @apply bg-navy-800 border border-navy-700 rounded-2xl p-5;
  }

  .card-hover {
    @apply card hover:border-teal-500/30 hover:bg-navy-700/50 transition-all duration-200 cursor-pointer;
  }

  .input-field {
    @apply bg-navy-900 border border-navy-600 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500/30 transition-all duration-200 font-body text-sm w-full;
  }

  .textarea-field {
    @apply input-field resize-none;
  }

  .badge {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium font-body;
  }

  .badge-teal { @apply badge bg-teal-500/15 text-teal-400 border border-teal-500/20; }
  .badge-indigo { @apply badge bg-indigo-500/15 text-indigo-400 border border-indigo-500/20; }
  .badge-green { @apply badge bg-green-500/15 text-green-400 border border-green-500/20; }
  .badge-yellow { @apply badge bg-yellow-500/15 text-yellow-400 border border-yellow-500/20; }
  .badge-red { @apply badge bg-red-500/15 text-red-400 border border-red-500/20; }
  .badge-slate { @apply badge bg-slate-500/15 text-slate-400 border border-slate-500/20; }

  .section-title {
    @apply font-display font-bold text-2xl text-white tracking-tight;
  }

  .section-sub {
    @apply text-slate-400 text-sm font-body mt-1;
  }

  .divider {
    @apply border-t border-navy-700 my-4;
  }

  .chat-user {
    @apply bg-teal-500/15 border border-teal-500/20 rounded-2xl rounded-tr-sm px-4 py-3 text-white text-sm font-body leading-relaxed max-w-[85%] ml-auto;
  }

  .chat-ai {
    @apply bg-navy-700 border border-navy-600 rounded-2xl rounded-tl-sm px-4 py-3 text-slate-200 text-sm font-body leading-relaxed max-w-[85%];
  }

  .score-ring-wrap {
    @apply relative inline-flex items-center justify-center;
  }
}

@layer utilities {
  .font-display { font-family: 'Syne', sans-serif; }
  .font-body { font-family: 'DM Sans', sans-serif; }
  .font-mono { font-family: 'JetBrains Mono', monospace; }

  .text-gradient {
    background: linear-gradient(135deg, #14B8A6, #6366F1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .bg-mesh {
    background-image: 
      radial-gradient(at 20% 20%, rgba(20,184,166,0.08) 0px, transparent 50%),
      radial-gradient(at 80% 80%, rgba(99,102,241,0.08) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(15,23,42,0) 0px, rgba(15,23,42,0.8) 100%);
  }

  .animate-in { animation: slideUp 0.4s ease forwards; }
}

/* Kanban drag styles */
.kanban-col { min-height: 200px; }
.dragging { opacity: 0.5; }

/* ======================================================
   DAYLIGHT THEME
   ====================================================== */
[data-theme="daylight"] body {
  background-color: #F1F5F9;
  color: #1E293B;
}

/* Utility overrides */
[data-theme="daylight"] .bg-navy-950 { background-color: #F8FAFC; }
[data-theme="daylight"] .bg-navy-900 { background-color: #FFFFFF; }
[data-theme="daylight"] .bg-navy-800 { background-color: #F8FAFC; }
[data-theme="daylight"] .bg-navy-700 { background-color: #EFF3F8; }
[data-theme="daylight"] .border-navy-700 { border-color: #E2E8F0; }
[data-theme="daylight"] .border-navy-600 { border-color: #CBD5E1; }
[data-theme="daylight"] .text-white { color: #0F172A; }
[data-theme="daylight"] .text-slate-100 { color: #1E293B; }
[data-theme="daylight"] .text-slate-200 { color: #334155; }
[data-theme="daylight"] .text-slate-300 { color: #475569; }
[data-theme="daylight"] .text-slate-400 { color: #64748B; }
[data-theme="daylight"] .text-slate-500 { color: #94A3B8; }
[data-theme="daylight"] .text-slate-600 { color: #CBD5E1; }
[data-theme="daylight"] .hover\:bg-navy-700:hover { background-color: #E2E8F0; }
[data-theme="daylight"] .hover\:bg-navy-600:hover { background-color: #CBD5E1; }
[data-theme="daylight"] .hover\:text-white:hover { color: #0F172A; }

/* Custom component overrides */
[data-theme="daylight"] .glass {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(0, 0, 0, 0.07);
}
[data-theme="daylight"] .glass-bright {
  background: rgba(255, 255, 255, 0.97);
  border: 1px solid rgba(13, 148, 136, 0.2);
}
[data-theme="daylight"] .glow-teal {
  box-shadow: 0 0 20px rgba(13,148,136,0.12), 0 0 40px rgba(13,148,136,0.06);
}
[data-theme="daylight"] .glow-indigo {
  box-shadow: 0 0 20px rgba(99,102,241,0.12), 0 0 40px rgba(99,102,241,0.06);
}
[data-theme="daylight"] .nav-item {
  color: #64748B;
}
[data-theme="daylight"] .nav-item:hover {
  color: #1E293B;
  background-color: #EFF3F8;
}
[data-theme="daylight"] .nav-item.active {
  background-color: rgba(13, 148, 136, 0.1);
  color: #0D9488;
  border-color: rgba(13, 148, 136, 0.25);
}
[data-theme="daylight"] .btn-primary {
  background-color: #0D9488;
  color: #FFFFFF;
}
[data-theme="daylight"] .btn-primary:hover { background-color: #14B8A6; }
[data-theme="daylight"] .btn-secondary {
  background-color: #F1F5F9;
  color: #475569;
  border-color: #E2E8F0;
}
[data-theme="daylight"] .btn-secondary:hover {
  background-color: #E2E8F0;
  color: #1E293B;
  border-color: #CBD5E1;
}
[data-theme="daylight"] .btn-ghost {
  color: #64748B;
}
[data-theme="daylight"] .btn-ghost:hover {
  color: #1E293B;
  background-color: #EFF3F8;
}
[data-theme="daylight"] .card {
  background-color: #FFFFFF;
  border-color: #E2E8F0;
}
[data-theme="daylight"] .card-hover:hover {
  background-color: #F8FAFC;
  border-color: rgba(13, 148, 136, 0.3);
}
[data-theme="daylight"] .input-field {
  background-color: #F8FAFC;
  border-color: #CBD5E1;
  color: #1E293B;
}
[data-theme="daylight"] .input-field::placeholder { color: #94A3B8; }
[data-theme="daylight"] .input-field:focus {
  border-color: #0D9488;
  box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.12);
}
[data-theme="daylight"] .section-title { color: #0F172A; }
[data-theme="daylight"] .section-sub { color: #64748B; }
[data-theme="daylight"] .divider { border-color: #E2E8F0; }
[data-theme="daylight"] .chat-user {
  background-color: rgba(13, 148, 136, 0.1);
  border-color: rgba(13, 148, 136, 0.2);
  color: #1E293B;
}
[data-theme="daylight"] .chat-ai {
  background-color: #F1F5F9;
  border-color: #E2E8F0;
  color: #475569;
}
[data-theme="daylight"] .text-gradient {
  background: linear-gradient(135deg, #0D9488, #4F46E5);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
[data-theme="daylight"] .bg-mesh {
  background-image:
    radial-gradient(at 20% 20%, rgba(13,148,136,0.06) 0px, transparent 50%),
    radial-gradient(at 80% 80%, rgba(99,102,241,0.05) 0px, transparent 50%),
    radial-gradient(at 50% 50%, rgba(248,250,252,0) 0px, rgba(241,245,249,0.9) 100%);
}
[data-theme="daylight"] ::-webkit-scrollbar-track { background: #E2E8F0; }
[data-theme="daylight"] ::-webkit-scrollbar-thumb { background: #CBD5E1; }
[data-theme="daylight"] ::-webkit-scrollbar-thumb:hover { background: #0D9488; }
[data-theme="daylight"] ::selection { background: rgba(13,148,136,0.25); color: #1E293B; }
[data-theme="daylight"] .typing-dot { background: #0D9488; }

/* ======================================================
   MYSPACE NEON THEME
   ====================================================== */
[data-theme="myspace"] body {
  background-color: #0D0014;
  color: #F0E6FF;
}

/* Utility overrides */
[data-theme="myspace"] .bg-navy-950 { background-color: #07000E; }
[data-theme="myspace"] .bg-navy-900 { background-color: #110020; }
[data-theme="myspace"] .bg-navy-800 { background-color: #1A0030; }
[data-theme="myspace"] .bg-navy-700 { background-color: #250040; }
[data-theme="myspace"] .border-navy-700 { border-color: rgba(191, 90, 242, 0.25); }
[data-theme="myspace"] .border-navy-600 { border-color: rgba(255, 0, 110, 0.25); }
[data-theme="myspace"] .text-white { color: #FFFFFF; }
[data-theme="myspace"] .text-slate-100 { color: #F0E6FF; }
[data-theme="myspace"] .text-slate-200 { color: #DDD6FE; }
[data-theme="myspace"] .text-slate-300 { color: #C4B5FD; }
[data-theme="myspace"] .text-slate-400 { color: #A78BFA; }
[data-theme="myspace"] .text-slate-500 { color: rgba(167,139,250,0.55); }
[data-theme="myspace"] .text-teal-400 { color: #FF006E; }
[data-theme="myspace"] .text-teal-500 { color: #FF006E; }
[data-theme="myspace"] .text-indigo-400 { color: #BF5AF2; }
[data-theme="myspace"] .hover\:bg-navy-700:hover { background-color: rgba(191, 90, 242, 0.15); }
[data-theme="myspace"] .hover\:bg-navy-600:hover { background-color: rgba(191, 90, 242, 0.22); }
[data-theme="myspace"] .hover\:text-white:hover { color: #FFFFFF; }

/* Custom component overrides */
[data-theme="myspace"] .glass {
  background: rgba(26, 0, 48, 0.78);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(191, 90, 242, 0.22);
}
[data-theme="myspace"] .glass-bright {
  background: rgba(37, 0, 64, 0.92);
  border: 1px solid rgba(255, 0, 110, 0.35);
}
[data-theme="myspace"] .glow-teal {
  box-shadow: 0 0 20px rgba(255,0,110,0.4), 0 0 40px rgba(255,0,110,0.15);
}
[data-theme="myspace"] .glow-indigo {
  box-shadow: 0 0 20px rgba(191,90,242,0.4), 0 0 40px rgba(191,90,242,0.15);
}
[data-theme="myspace"] .nav-item { color: #A78BFA; }
[data-theme="myspace"] .nav-item:hover {
  color: #F0E6FF;
  background-color: rgba(191, 90, 242, 0.12);
}
[data-theme="myspace"] .nav-item.active {
  background-color: rgba(255, 0, 110, 0.12);
  color: #FF006E;
  border-color: rgba(255, 0, 110, 0.4);
}
[data-theme="myspace"] .btn-primary {
  background: linear-gradient(135deg, #FF006E, #BF5AF2);
  color: #FFFFFF;
  box-shadow: 0 0 18px rgba(255, 0, 110, 0.45);
}
[data-theme="myspace"] .btn-primary:hover {
  background: linear-gradient(135deg, #FF2280, #CC70F5);
  box-shadow: 0 0 28px rgba(255, 0, 110, 0.65);
}
[data-theme="myspace"] .btn-secondary {
  background-color: rgba(37, 0, 64, 0.85);
  color: #C4B5FD;
  border-color: rgba(191, 90, 242, 0.4);
}
[data-theme="myspace"] .btn-secondary:hover {
  background-color: rgba(55, 0, 90, 0.9);
  color: #F0E6FF;
  border-color: rgba(191, 90, 242, 0.65);
}
[data-theme="myspace"] .btn-ghost { color: #A78BFA; }
[data-theme="myspace"] .btn-ghost:hover {
  color: #F0E6FF;
  background-color: rgba(191, 90, 242, 0.12);
}
[data-theme="myspace"] .card {
  background-color: rgba(26, 0, 48, 0.82);
  border-color: rgba(191, 90, 242, 0.3);
}
[data-theme="myspace"] .card-hover:hover {
  background-color: rgba(37, 0, 64, 0.88);
  border-color: rgba(255, 0, 110, 0.55);
  box-shadow: 0 0 20px rgba(255,0,110,0.15), 0 0 40px rgba(191,90,242,0.08);
}
[data-theme="myspace"] .input-field {
  background-color: rgba(17, 0, 32, 0.92);
  border-color: rgba(191, 90, 242, 0.4);
  color: #F0E6FF;
}
[data-theme="myspace"] .input-field::placeholder { color: rgba(167, 139, 250, 0.45); }
[data-theme="myspace"] .input-field:focus {
  border-color: #FF006E;
  box-shadow: 0 0 0 3px rgba(255, 0, 110, 0.2), 0 0 18px rgba(255, 0, 110, 0.1);
}
[data-theme="myspace"] .section-title {
  color: #FFFFFF;
  text-shadow: 0 0 20px rgba(191, 90, 242, 0.45);
}
[data-theme="myspace"] .section-sub { color: #A78BFA; }
[data-theme="myspace"] .divider { border-color: rgba(191, 90, 242, 0.2); }
[data-theme="myspace"] .chat-user {
  background: rgba(255, 0, 110, 0.12);
  border-color: rgba(255, 0, 110, 0.32);
  color: #F0E6FF;
}
[data-theme="myspace"] .chat-ai {
  background: rgba(37, 0, 64, 0.72);
  border-color: rgba(191, 90, 242, 0.28);
  color: #DDD6FE;
}
[data-theme="myspace"] .text-gradient {
  background: linear-gradient(135deg, #FF006E, #BF5AF2, #00EEFF);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
[data-theme="myspace"] .bg-mesh {
  background-image:
    radial-gradient(at 10% 15%, rgba(255,0,110,0.18) 0px, transparent 40%),
    radial-gradient(at 90% 85%, rgba(191,90,242,0.18) 0px, transparent 40%),
    radial-gradient(at 80% 15%, rgba(255,0,110,0.08) 0px, transparent 35%),
    radial-gradient(at 20% 85%, rgba(63,0,255,0.1) 0px, transparent 35%),
    radial-gradient(at 50% 50%, rgba(0,238,255,0.04) 0px, transparent 50%);
}
[data-theme="myspace"] ::-webkit-scrollbar-track { background: #110020; }
[data-theme="myspace"] ::-webkit-scrollbar-thumb { background: rgba(191, 90, 242, 0.5); }
[data-theme="myspace"] ::-webkit-scrollbar-thumb:hover { background: #FF006E; }
[data-theme="myspace"] ::selection { background: rgba(255, 0, 110, 0.35); color: #F0E6FF; }
[data-theme="myspace"] .typing-dot { background: #FF006E; }

/* Typing indicator */
.typing-dot {
  width: 6px; height: 6px;
  background: #14B8A6;
  border-radius: 50%;
  animation: typingBounce 1.4s infinite;
}
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingBounce {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-6px); opacity: 1; }
}

/* ======================================================
   VISUALS MODE
   ====================================================== */
@keyframes glowPulse {
  0%, 100% { box-shadow: 0 0 10px rgba(20,184,166,0.35), 0 0 4px rgba(20,184,166,0.15); }
  50%       { box-shadow: 0 0 28px rgba(20,184,166,0.8), 0 0 55px rgba(99,102,241,0.35); }
}

@keyframes navActivePulse {
  0%, 100% { box-shadow: none; }
  50%       { box-shadow: inset 0 0 18px rgba(20,184,166,0.18); }
}

@keyframes toastIn {
  from { opacity: 0; transform: translateX(40px) scale(0.88); }
  to   { opacity: 1; transform: translateX(0) scale(1); }
}

@keyframes toastOut {
  from { opacity: 1; transform: translateX(0) scale(1); }
  to   { opacity: 0; transform: translateX(40px) scale(0.88); }
}

@keyframes emojiFloat {
  0%   { transform: translateY(0) scale(1); opacity: 1; }
  60%  { opacity: 1; }
  100% { transform: translateY(-200px) scale(0.6) rotate(20deg); opacity: 0; }
}

@keyframes particleDrift {
  0%   { transform: translateY(0) translateX(0) scale(1); opacity: 0; }
  15%  { opacity: 0.75; }
  85%  { opacity: 0.45; }
  100% { transform: translateY(-90px) translateX(var(--px-drift, 20px)) scale(0.5); opacity: 0; }
}

@keyframes bigWinBounce {
  0%   { transform: translate(-50%, -50%) scale(0) rotate(-8deg); opacity: 0; }
  30%  { transform: translate(-50%, -50%) scale(1.25) rotate(3deg); opacity: 1; }
  55%  { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
  75%  { transform: translate(-50%, -50%) scale(1.08) rotate(-2deg); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(0.85) rotate(0deg); opacity: 0; }
}

@keyframes meshShift {
  0%, 100% { filter: hue-rotate(0deg) brightness(1); }
  33%      { filter: hue-rotate(22deg) brightness(1.06); }
  66%      { filter: hue-rotate(-14deg) brightness(1.03); }
}

[data-visuals="on"] .btn-primary {
  animation: glowPulse 2.5s ease-in-out infinite;
}

[data-visuals="on"] .nav-item.active {
  animation: navActivePulse 3s ease-in-out infinite;
}

[data-visuals="on"] .bg-mesh {
  animation: meshShift 14s ease-in-out infinite;
}

[data-visuals="on"] .badge-teal,
[data-visuals="on"] .badge-green {
  animation: glowPulse 2s ease-in-out infinite;
}

.visuals-particle {
  pointer-events: none;
  animation: particleDrift var(--px-dur, 6s) linear var(--px-delay, 0s) infinite;
}

.visuals-toast {
  padding: 10px 18px;
  border-radius: 14px;
  font-family: 'Syne', sans-serif;
  font-size: 13px;
  font-weight: 600;
  color: #FFFFFF;
  background: linear-gradient(135deg, rgba(20,184,166,0.93), rgba(99,102,241,0.93));
  backdrop-filter: blur(14px);
  border: 1px solid rgba(255,255,255,0.18);
  box-shadow: 0 8px 32px rgba(0,0,0,0.4), 0 0 20px rgba(20,184,166,0.3);
  animation: toastIn 0.4s cubic-bezier(0.34,1.56,0.64,1), toastOut 0.45s ease 3.2s forwards;
  will-change: transform, opacity;
  max-width: 270px;
}

.visuals-bigwin {
  position: fixed;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9998;
  pointer-events: none;
  font-family: 'Syne', sans-serif;
  font-size: clamp(2.5rem, 10vw, 5.5rem);
  font-weight: 800;
  text-align: center;
  white-space: nowrap;
  color: #F59E0B;
  text-shadow:
    0 0 20px rgba(245,158,11,0.95),
    0 0 45px rgba(20,184,166,0.8),
    0 0 80px rgba(255,0,110,0.6),
    0 4px 24px rgba(0,0,0,0.6);
  animation: bigWinBounce 2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Theme-aware toast colours */
[data-theme="myspace"] .visuals-toast {
  background: linear-gradient(135deg, rgba(255,0,110,0.93), rgba(191,90,242,0.93));
  box-shadow: 0 8px 32px rgba(0,0,0,0.5), 0 0 20px rgba(255,0,110,0.4);
}

[data-theme="daylight"] .visuals-toast {
  background: linear-gradient(135deg, rgba(13,148,136,0.92), rgba(79,70,229,0.92));
  color: #FFFFFF;
}
